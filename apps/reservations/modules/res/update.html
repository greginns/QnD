<page id='rsvs-rsv-update' style='display: none;'>
  <section id='rsvs-rsv-update-section'>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top r4-navbar">
      <div class="container-fluid">
        <div>
        </div>
        <div>
          <span style='font-size: 20px'>
            Reservation
            <span mvc-text='main.rsvno'></span>
            -
            <span mvc-text='text.contact'></span>
          </span>          
        </div>
        <div>
          &nbsp;
        </div>
        <!--div class='col-2'>
          <div class='d-block d-sm-none'>XS</div>
          <div class='d-none d-sm-block d-md-none'>SM</div>
          <div class='d-none d-md-block d-lg-none'>MD</div>
          <div class='d-none d-lg-block d-xl-none'>LG</div>
          <div class='d-none d-xl-block'>XL</div>
        </div-->
      </div>
    </nav>

    <!-- XS only -->
    <div class='row d-block d-sm-none mb-3'>
      <div class='col-12'>
        <div class='accordion shadow' id='res-update-xs'>
          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-status">
                <span class='float-start pe-2'>
                  Status
                </span>
                <span class='float-end' mvc-text='text.status'>
                </span>
              </button>
            </div>

            <div id="res-update-xs-status" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body' mvc-click='editStatus()'>
                {% include "./update-status.html" %}
              </div>
            </div>
          </div>

          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-guest">
                <span class='float-start pe-2'>
                  Guest
                </span>
                <span class='float-end' mvc-text='text.contact'>
                </span>
              </button> 
            </div>

            <div id="res-update-xs-guest" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body' mvc-click='editGuest()'>
                {% include "./update-guest.html" %}
              </div>
            </div>
          </div>

          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-notes">
                <span class='float-start pe-2'>
                  Notes
                </span>
                <span class="badge rounded-pill bg-primary float-end" mvc-text='main.notes.length'></span>
              </button>
            </div>

            <div id="res-update-xs-notes" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body'>
                <div class='row'>
                  <div class='col-12'>
                    <button class='btn-sm btn-outline-primary float-end' mvc-click='notesAdd()'>
                      Add
                    </button>
                  </div>
                </div>
                <div class='row'>
                  <div class='col-12'>
                    {% include "./update-notes.html" %}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-notify">
                Notifications & Reminders
              </button>
            </div>

            <div id="res-update-xs-notify" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body' mvc-click='viewNotifications()'>
                {% include "./update-notify.html" %}
              </div>
            </div>
          </div>

          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-finance">
                <span class='float-start pe-2'>
                  Charges
                </span>
                <span class='float-end' mvc-text='main.total'>
                </span>
              </button>
            </div>

            <div id="res-update-xs-finance" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body' mvc-click='editFinancials()'>
                {% include "./update-finance.html" %}
              </div>
            </div>
          </div>

          <div class='accordion-item'>
            <div class='accordion-header'>
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#res-update-xs-terms">
                <span class='float-start pe-2'>
                  Balance Due
                </span>
                <span class='float-end' mvc-text='main.baldue'>
                </span>
              </button>
            </div>

            <div id="res-update-xs-terms" class="accordion-collapse collapse" data-bs-parent="#res-update-xs">
              <div class='accordion-body' mvc-click='editTerms()'>
                {% include "./update-terms.html" %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SM and above -->
    <div class='d-none d-sm-block mb-3'>
      <div class='row'>
        <div class='col-12 col-md-6 mb-4'>
          <div class='card shadow'>
            <div class='card-header'>
              <h5 class='float-start'>Status</h5>
              <button class='btn-sm btn-outline-primary float-end' data-bs-toggle="modal" data-bs-target="#editStatus">
                Edit
              </button>
            </div>
            <div class='card-body'>
              {% include "./update-status.html" %}
            </div>
          </div>
        </div>
    
        <div class='col-12 col-md-6 mb-4'>
          <div class='card shadow'>
            <div class='card-header'>
              <h5 class='float-start'>Guest</h5>
              <button class='btn-sm btn-outline-primary float-end' mvc-click='editGuest()'>
                Edit
              </button>
            </div>
            <div class='card-body'>
              {% include "./update-guest.html" %}
            </div>
          </div>
        </div>
      </div>
  
      <div class='row'>
        <div class='col-12 col-md-6 mb-4'>        
          <div class='card shadow'>
            <div class='card-header'>
                <h5 class='float-start me-2'>Notes</h5>
              <span class="badge rounded-pill bg-primary" mvc-text='main.notes.length'></span>
              <button class='btn-sm btn-outline-primary float-end' mvc-click='notesAdd()'>
                Add
              </button>
            </div>
            <div class='card-body'>
              {% include "./update-notes.html" %}
            </div>
          </div>        
        </div>

        <div class='col-12 col-md-6 mb-4'>        
          <div class='card shadow'>
            <div class='card-header'>
              <h5 class='float-start'>Notifications & Reminders</h5>
            </div>
            <div class='card-body'>
              {% include "./update-notify.html" %}
            </div>
          </div>        
        </div>
      </div>
  
      <div class='row'>
        <div class='col-12 col-lg-6 mb-3'>
          <div class='card shadow'>
            <div class='card-header'>
              <h5 class='float-start'>Financial</h5>
              <button class='btn-sm btn-outline-primary float-end' mvc-click='editFinancials()'>
                Edit
              </button>
            </div>
            <div class='card-body'>
              {% include "./update-finance.html" %}
            </div>
          </div>        
        </div>
  
        <div class='col-12 col-lg-6 mb-3'>
          <div class='card shadow'>
            <div class='card-header'>
              <h5 class='float-start'>Payment Schedule</h5>
              <button class='btn-sm btn-outline-primary float-end' mvc-click='editTerms()'>
                Edit
              </button>
            </div>
            <div class='card-body'>
              {% include "./update-terms.html" %}
            </div>
          </div>        
        </div>
  
      </div>
    </div>

    <div class='row mb-4'>
      <div class='col-12'>
        <button class='btn btn-primary' mvc-click='send()'>
          Email
        </button>
        <button class='btn btn-success' mvc-click='payments()'>
          Payments
        </button>
        <button class='btn btn-warning' mvc-click='test()'>
          Test
        </button>
      </div>
    </div>

    <!-- Status Modal -->
    <div class="modal fade" id="editStatus" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Status</h5>
            <button type="button" class="btn-close" mvc-click='resetStatus()'>
            </button>
          </div>

          <div class='modal-body'>
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.SelectMVC(id=main.company.id, size='1', mvc_value='main.company', mvc_each='companies', textField='name', valueField='id', label=main.company.verbose, mvc_on='{"change": "getCompany()"}') }}
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.SelectMVC(id=main.area.id, size='1', mvc_value='main.area', mvc_each='areas', textField='name', valueField='code', label=main.area.verbose) }}
              </div>
            </div>
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.grpsize.id, mvc_value='main.grpsize', min='0', max='9999', step='1', label=main.grpsize.verbose) }}
              </div>
            </div>
    
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.infants.id, mvc_value='main.infants', min='0', max='9999', step='1', label=main.infants.verbose) }}
              </div>
            </div>
    
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.children.id, mvc_value='main.children', min='0', max='9999', step='1', label=main.children.verbose) }}
              </div>
            </div>        
    
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.youth.id, mvc_value='main.youth', min='0', max='9999', step='1', label=main.youth.verbose) }}
              </div>
            </div>        
    
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.adults.id, mvc_value='main.adults', min='0', max='9999', step='1', label=main.adults.verbose) }}
              </div>
            </div>        
    
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Integer(id=main.seniors.id, mvc_value='main.seniors', min='0', max='9999', step='1', label=main.seniors.verbose) }}
              </div>
            </div>      
            
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Char(id=main.owner.id, maxlength=main.owner.maxlength, mvc_value='main.owner', label='Owner (employee)') }}
              </div>
            </div>            
            
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Switch(id=main.allowfup.id, maxlength=main.allowfup.maxlength, mvc_checked='main.allowfup', label=main.allowfup.verbose) }}
              </div>
            </div>

            <div class='row'>
              <div class='col-12'>
                <button class='btn btn-success' mvc-click='updateStatus()'>
                  Save Changes
                </button>
              </div>
            </div>

            <div class='row'>
              <div class='col-12'>
                <hr>
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-6'>
                <span mvc-show='main.status == "A"'>
                  <button class='btn btn-outline-primary' mvc-click='quote()'>
                    Convert to Quotation
                  </button>
                </span>

                <span mvc-show='main.status == "Q"'>
                  <button class='btn btn-outline-primary' mvc-click='quote()'>
                    Convert to Active
                  </button>
                </span>
              </div>

              <div class='col-6'>
                <span mvc-show='main.status == "A"'>
                  <button class='btn btn-outline-danger' mvc-click='cancel()'>
                    Cancel Reservation
                  </button>
                </span>

                <span mvc-show='main.status == "X"'>
                  <button class='btn btn-outline-danger' mvc-click='cancel()'>
                    UnCancel Reservation
                  </button>
                </span>
              </div>
            </div>

          </div>
        </div>  
      </div>
    </div>

    <!-- Guest Modal -->
    <div class="modal fade" id="editGuest" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Guest</h5>
            <button type="button" class="btn-close" mvc-click='resetGuest()'>
            </button>
          </div>

          <div class='modal-body'>
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Search(id=main.contact.id, maxlength=main.contact.maxlength, mvc_value='main.contact', mvc_on='{"change": "getContact()"}', mvc_click='contactSearch()', label='Guest') }}
              </div>
              <div class='col-12'>
                <span mvc-text='contact.first'></span>
                <span mvc-text='contact.last'></span>
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Char(id=main.client.id, maxlength=main.client.maxlength, mvc_value='main.client', label=main.client.verbose) }}
              </div>
            </div>

            <div class='row'>
              <div class='col-12'>
                <button class='btn btn-success' mvc-click='updateGuest()'>
                  Save Changes
                </button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Financial Modal -->
    <div class="modal fade" id="editFinancials" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Financials</h5>
            <button type="button" class="btn-close" mvc-click='resetFinancials()'>
            </button>
          </div>

          <div class='modal-body'>
            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Switch(id=main.taxable.id, maxlength=main.taxable.maxlength, mvc_checked='main.taxable', label=main.taxable.verbose) }}
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12'>
                {{ fields.Char(id=main.taxno.id, maxlength=main.taxno.maxlength, mvc_value='main.taxno', label=main.taxno.verbose) }}
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12 col-lg-6'>
                {{ fields.Search(id=main.agent.id, maxlength=main.agent.maxlength, mvc_value='main.agent', mvc_on='{"change": "getAgent()"}', mvc_click='agentSearch()', label=main.agent.verbose) }}
              </div>
              <div class='col-12'>
                <span mvc-text='agent.first'></span>
                <span mvc-text='agent.last'></span>
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12 col-lg-6'>
                {{ fields.Float(id=main.commrate.id, min='0.00', max='100.00', step='1.0', mvc_value='main.commrate', mvc_enabled='', mvc_disabled='', mvc_role='dollar', choices=main.commrate.choices, label=main.commrate.verbose) }}
              </div>
            </div>

            <div class='row mb-3'>
              <div class='col-12 col-lg-6'>
                {{ fields.SelectMVC(id=main.currency.id, mvc_value='main.currency', mvc_each='currencies', mvc_on='{"change": "getCurrency()"}', size='1', textField='name', valueField='code', label=main.currency.verbose) }}
              </div>
            </div>                        

            <div class='row'>
              <div class='col-12'>
                <button class='btn btn-success' mvc-click='updateFinancials()'>
                  Save Changes
                </button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Payment Terms Modal -->
    <div class="modal fade" id="editTerms" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Payment Terms</h5>
            <button type="button" class="btn-close" mvc-click='resetTerms()'>
            </button>
          </div>

          <div class='modal-body'>
            <div class='row mb-3'>
              <div class='table-responsive'>
                <table class='table table-sm' style='min-width: 450px'>
                  <thead>
                    <tr>
                      <th></th>
                      <th>Amount</th>
                      <th>Date</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <th>
                        Deposit
                      </th>
                      <td>
                        {{ fields.Float(id=main.pmtamt1.id, min='0.00', max='9999999.00', step='1.0', mvc_value='main.pmtamt1', mvc_enabled='', mvc_disabled='', mvc_role='dollar', label='') }}
                      </td>
                      <td>
                        {{ fields.Date(id=main.pmtdate1.id, mvc_value='main.pmtdate1', mvc_role='date', label='') }}
                      </td>
                    </tr>
                    <tr>
                      <th>
                        Payment 1
                      </th>
                      <td>
                        {{ fields.Float(id=main.pmtamt2.id, min='0.00', max='9999999.00', step='1.0', mvc_value='main.pmtamt2', mvc_enabled='', mvc_disabled='', mvc_role='dollar', label='') }}
                      </td>
                      <td>
                        {{ fields.Date(id=main.pmtdate2.id, mvc_value='main.pmtdate2', mvc_role='date', label='') }}
                      </td>
                    </tr>
                    <tr>
                      <th>
                        Payment 2
                      </th>
                      <td>
                        {{ fields.Float(id=main.pmtamt3.id, min='0.00', max='9999999.00', step='1.0', mvc_value='main.pmtamt3', mvc_enabled='', mvc_disabled='', mvc_role='dollar', label='') }}
                      </td>
                      <td>
                        {{ fields.Date(id=main.pmtdate3.id, mvc_value='main.pmtdate3', mvc_role='date', label='') }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class='row'>
              <div class='col-12 col-sm-6 mb-3'>
                {{ fields.Switch(id=main.lockamts.id, maxlength=main.lockamts.maxlength, mvc_checked='main.lockamts', label=main.lockamts.verbose) }}
              </div>

              <div class='col-12 col-sm-6 mb-3''>
                {{ fields.Switch(id=main.lockdates.id, maxlength=main.lockdates.maxlength, mvc_checked='main.lockdates', label=main.lockdates.verbose) }}
              </div>
            </div>

            <div class='row'>
              <div class='col-12 col-sm-6 mb-3'>
                Current Rule
                <span mvc-text='main.pmtterms'></span>
                <br>
                <span mvc-text='pmtterms.name'></span>
              </div>
              <div class='col-12 col-sm-6 mb-3'>
                {{ fields.SelectMVC(id=main.pmtterms.id, size='1', mvc_value='main.pmtterms', mvc_each='pmttermss', textField='name', valueField='code', label='Override Rule', mvc_on='{"change": "getPmtTerms()"}') }}         
              </div>
            </div>

            <div class='row'>
              <div class='col-12'>
                <button class='btn btn-success' mvc-click='updateTerms()'>
                  Save Changes
                </button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  
    <div class='row'>
      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm act-color' mvc-click='book("A")'>
          Activity
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm lodge-color' mvc-click='book("L")'>
          Lodging
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm rent-color' mvc-click='book("R")'>
          Rental
        </button>
      </div>
      
      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm meal-color' mvc-click='book("M")'>
          Meal
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm trans-color' mvc-click='book("T")'>
          Transport
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm store-color' mvc-click='book("S")'>
          Retail
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm other-color' mvc-click='book("O")'>
          Misc
        </button>
      </div>

      <div class='col-4 col-md-2 col-lg-1 mb-3 text-center'>
        <button class='btn btn-sm package-color' mvc-click='book("P")'>
          Package
        </button>
      </div>
    </div>  
    </section>

  <section id='rsvs-rsv-items-section'>
    <div class='row'>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        Date
      </div>
      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        Guests
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        Item
      </div>
      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        Dur
      </div>      
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        Time/Unit
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        Pricing
      </div>
    </div>

    <div id='rsvs-rsv-items-list'>
    </div>
  </section>
</page>

<template id='entry-item-A'>
  <div class='mb-2'>
    <div class='row act-color' mvc-show='viewState == "edit"'>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Date(id='item-date', mvc_value='item.date', mvc_click='date:abs()', label='', mvc_on='{"change": "date()"}') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        {{ fields.Dropper(id='item-guest', mvc_value='facade.ppl', handler='ppl', template_id='rsv-update-dropdown-guests', dir_class='dropup', dd_class='dropper-guests', label='') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-code', mvc_value='facade.code', handler='code', template_id='rsv-update-dropdown-code', dir_class='dropup', dd_class='dropper-code', label='', mvc_enabled='item.date') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        {{ fields.Char(id='item-dur', mvc_value='item.dur', label='', mvc_enabled='false') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-time', mvc_value='facade.time', mvc_filter='time', handler='time', template_id='rsv-update-dropdown-time', dir_class='dropup dropright', dd_class='dropper-time', label='', mvc_enabled='item.date') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-rate', mvc_value='facade.rate', handler='rate', template_id='rsv-update-dropdown-rate', dir_class='dropup dropright', dd_class='dropper-rate drop-right', label='', mvc_enabled='item.date') }}
      </div>
  
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1' style='font-size: 20px'>
        <span class='pointer text-success me-2' mvc-click='save()'>
          <i class="fa-light fa-floppy-disk"></i>
        </span>

        <span mvc-show='item.seq1'>
          <span class='pointer me-2' mvc-click='endEdit()'>
            <i class="fa-light fa-xmark me-2"></i>
          </span>          
          <span class='pointer text-danger me-2' mvc-click='delete()'>
            <i class="fa-light fa-trash"></i>
          </span>
        </span>
      </div>
    </div>
  
    <div class='row act-color' mvc-show='viewState == "view"'>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='item.date' mvc-filter='date'></span>
      </div>
      <div class='col-6 col-md-2 col-lg-1 mt-1 mb-1'>
        <span mvc-text='facade.ppl'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.code'></span>
      </div>
      <div class='col-6 col-md-2 col-lg-1 mt-1 mb-1'>
        <span mvc-text='item.dur'></span>
      </div>        
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.time' mvc-filter='time'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.rate'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span class='pointer' mvc-click='edit()' style='font-size: 20px'>
          <i class="fa-thin fa-pen"></i>
        </span>
      </div>
    </div> 
    
    <div class='includes'>
    </div>
  </div>
</template>

<template id='entry-item-M'>
  <div class='mb-2'>
    <div class='row meal-color' mvc-show='viewState == "edit"'>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Date(id='item-date', mvc_value='item.date', mvc_click='date:abs()', label='', mvc_on='{"change": "date()"}') }}
      </div>

      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        {{ fields.Dropper(id='item-guest', mvc_value='facade.ppl', handler='ppl', template_id='rsv-update-dropdown-guests', dir_class='dropup', dd_class='dropper-guests', label='') }}
      </div>

      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-code', mvc_value='facade.code', handler='code', template_id='rsv-update-dropdown-code', dir_class='dropup', dd_class='dropper-code', label='', mvc_enabled='item.date') }}
      </div>

      <div class='col-6 col-md-3 col-lg-1 mt-1 mb-1'>
        {{ fields.Char(id='item-dur', mvc_value='item.dur', mvc_role='integer', label='') }}
      </div>

      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-time', mvc_value='facade.time', mvc_filter='time', handler='time', template_id='rsv-update-dropdown-time', dir_class='dropup dropright', dd_class='dropper-time', label='', mvc_enabled='item.date') }}
      </div>

      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        {{ fields.Dropper(id='item-rate', mvc_value='facade.rate', handler='rate', template_id='rsv-update-dropdown-rate', dir_class='dropup dropright', dd_class='dropper-rate drop-right', label='', mvc_enabled='item.date') }}
      </div>

      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1' style='font-size: 20px'>
        <span class='pointer text-success me-2' mvc-click='save()'>
          <i class="fa-light fa-floppy-disk"></i>
        </span>

        <span mvc-show='item.seq1'>
          <span class='pointer me-2' mvc-click='endEdit()'>
            <i class="fa-light fa-xmark me-2"></i>
          </span>
          <span class='pointer text-danger me-2' mvc-click='delete()'>
            <i class="fa-light fa-trash"></i>
          </span>
        </span>
      </div>
    </div>

    <div class='row meal-color' mvc-show='viewState == "view"'>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='item.date' mvc-filter='date'></span>
      </div>
      <div class='col-6 col-md-2 col-lg-1 mt-1 mb-1'>
        <span mvc-text='facade.ppl'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.code'></span>
      </div>
      <div class='col-6 col-md-2 col-lg-1 mt-1 mb-1'>
        <span mvc-text='item.dur'></span>
      </div>        
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.time' mvc-filter='time'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span mvc-text='facade.rate'></span>
      </div>
      <div class='col-6 col-md-3 col-lg-2 mt-1 mb-1'>
        <span class='pointer' mvc-click='edit()' style='font-size: 20px'>
          <i class="fa-thin fa-pen"></i>
        </span>
      </div>
    </div>  
  </div>
</template>

<template id='rsv-update-dropdown-guests'>
  <div class='container'>
    <div class='row mb-3'>
      <div class='col'>
        {{ fields.Integer(id='guests-infants', mvc_value='item.infants', min='0', max='9999', step='1', label='Infants') }}
      </div>
    </div>

    <div class='row mb-3'>
      <div class='col'>
        {{ fields.Integer(id='guests-children', mvc_value='item.children', min='0', max='9999', step='1', label='Children') }}
      </div>
    </div>

    <div class='row mb-3'>
      <div class='col'>
        {{ fields.Integer(id='guests-youth', mvc_value='item.youth', min='0', max='9999', step='1', label='Youth') }}
      </div>
    </div>

    <div class='row mb-3'>
      <div class='col'>
        {{ fields.Integer(id='guests-adults', mvc_value='item.adults', min='0', max='9999', step='1', label='Adults') }}
      </div>
    </div>

    <div class='row'>
      <div class='col'>
        {{ fields.Integer(id='guests-seniors', mvc_value='item.seniors', min='0', max='9999', step='1', label='Seniors') }}
      </div>
    </div>
 
    <div class='row'>
      <div class='col'>
        <div class='float-end'>
          <span class='pointer accept text-success' style='font-size: 30px'>
            <i class="fa-light fa-check"></i>
          </span>

          <span class='pointer dismiss text-danger' style='font-size: 30px'>
            <i class="fa-light fa-xmark"></i>
          </span>
        </div>
      </div>
    </div>

  </div>
</template>

<template id='rsv-update-dropdown-code'>
  <div class='container'>
    <div class='row mb-3'>
      <div class='col-12 col-md-6'>
        {{ fields.SelectMVC(id='item-group', size='10', mvc_value='item.group', mvc_each='productGroups', mvc_on='{"change": "groupChanged()"}', valueField='code', textField='name', label='') }}
      </div>
      <div class='col-12 col-md-6'>
        {{ fields.SelectMVC(id='item-code', size='10', mvc_value='item.code', mvc_each='groupProducts', valueField='code', textField='name', classField='class', label='') }}
      </div>
    </div>

    <div class='row'>
      <div class='col'>
        <div class='float-end'>
          <span class='pointer accept text-success' style='font-size: 30px'>
            <i class="fa-light fa-check"></i>
          </span>

          <span class='pointer dismiss text-danger' style='font-size: 30px'>
            <i class="fa-light fa-xmark"></i>
          </span>
        </div>
      </div>
    </div>
  </div>
</template>

<template id='rsv-update-dropdown-time'>
  <div class='container'>
    <div class='row'>
      <div class='col-12'>
        <div mvc-each='days' mvc-index='$index1'>
          <div class='row'style='font-family: "courier new";'>
            <div class='col-1'>
              Day
            </div>
            <div class='col-11'>
              Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Limit
              &nbsp;&nbsp;&nbsp;&nbsp;Booked 
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Avail
            </div>
          </div>

          <div class='row'>
            <div class='col-1'>
              <span mvc-text='days[$index1].day'></span>
            </div>
            <div class='col-11'>
              <select mvc-each='days[$index1].times' mvc-value='item.times[$index1]' mvc-index='$index2' style='font-family: "courier new";'>
                <option mvc-option='{text: "days[$index1].times[$index2].text", value: "days[$index1].times[$index2].time"}' class='form-control'></option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class='row'>
      <div class='col'>
        <div class='float-end'>
          <span class='pointer accept text-success' style='font-size: 30px'>
            <i class="fa-light fa-check"></i>
          </span>

          <span class='pointer dismiss text-danger' style='font-size: 30px'>
            <i class="fa-light fa-xmark"></i>
          </span>
        </div>
      </div>
    </div>
  </div>
</template>

<template id='rsv-update-dropdown-rate'>
  <div class='container'>
    <div class='row mb-3'>
      <div class='col-12 col-sm-6'>
        {{ fields.SelectMVC(id='item-rate', size='1', mvc_value='item.rateno', mvc_each='rates', textField='name', valueField='rateno', label='', mvc_on='{"change": "rateChanged()"}') }}
      </div>
    </div>

    <div mvc-show='item.rateno'>
      <div class='row' mvc-show='item.pdesc[0]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[0]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl1', mvc_value='item.pqty[0]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price1', mvc_value='item.price[0]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[0]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[1]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[1]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl2', mvc_value='item.pqty[1]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price2', mvc_value='item.price[1]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[1]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[2]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[2]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl3', mvc_value='item.pqty[2]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price3', mvc_value='item.price[2]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[2]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[3]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[3]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl4', mvc_value='item.pqty[3]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price4', mvc_value='item.price[3]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[3]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[4]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[4]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl5', mvc_value='item.pqty[4]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price5', mvc_value='item.price[4]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[4]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[5]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[5]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-ppl6', mvc_value='item.pqty[5]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-price6', mvc_value='item.price[5]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[5]' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[6] && rate.ratebase1=="F"'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[6]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-addl', mvc_value='item.pqty[6]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-addl', mvc_value='item.price[6]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[6]' class='float-end'></span>
        </div>
      </div>

      <div class='row'>
        <div class='col-12 col-sm-3 mb-1'>
          Charges
        </div>
        <div class='col-2 mb-1'>
        </div>
        <div class='col-4 col-sm-3'>
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.charges' class='float-end'></span>
        </div>
      </div>

      <div class='row' mvc-show='item.pdesc[7]'>
        <div class='col-12 col-sm-3 mb-1'>
          <span mvc-text='item.pdesc[7]'></span>
        </div>
        <div class='col-2 mb-1'>
          {{ fields.Char(id='item-comped', mvc_value='item.pqty[7]', min='0', max='9999', step='1', label='', mvc_role='integer', mvc_on='{"change": "calcCharges()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ fields.Char(id='item-compprice', mvc_value='item.price[7]', min='0', max='99999', step='1', label='', mvc_role='dollar', mvc_on='{"change": "calcCharges()"}', class='text-end') }}
        </div>
        <div class='col-5 col-sm-3'>
          <span mvc-text='item.pextn[7]' class='float-end'></span>
        </div>
      </div>

      <div class='row'>
        <div class='col-12 col-sm-3 mb-1'>
          Discount
        </div>
        <div class='col-6 col-sm-5 mb-1'>
          {{ fields.SelectMVC(id='item-disc', size='1', mvc_value='item.disccode', mvc_each='discounts', textField='name', valueField='code', label='', mvc_on='{"change": "changeDiscount()"}') }}
        </div>
        <div class='col-4 col-sm-3'>
          <span mvc-text='item.discount' class='float-end'></span>
        </div>
        <div class='col-1'>
          <span class='pointer' style='font-size: 32px; line-height: 20px;' mvc-click='removeDiscount()'>&times;</span>
        </div>
      </div>

      <div class='row' mvc-show='discount.manual'>
        <div class='col-12 col-sm-3 mb-1'>
          Amount
        </div>
        <div class='col-6 col-sm-5 mb-1'>
          {{ fields.Char(id='item-discamt', mvc_value='item.discamt', min='0', max='99999', step='1', label='', mvc_role='float') }}
        </div>
        <div class='col-4 col-sm-3'>
          {{ buttons.btnsmoutline(text='Calc', mvc_click='calcDiscount()') }}
        </div>
        <div class='col-1'>
        </div>
      </div>      

      <div class='row'>
        <div class='col'>
          <div class='float-end'>
            <span class='pointer accept text-success' style='font-size: 30px'>
              <i class="fa-light fa-check"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>